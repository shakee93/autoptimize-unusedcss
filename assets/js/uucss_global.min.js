!function(s){s.uucssAlert=function(t,e="success",n=3e3){new Noty({text:t,layout:"bottomCenter",timeout:n,type:e,animation:{open:"animated bounceInUp",close:"animated bounceOutDown"}}).show()},s.uucss_log=function(t){t&&s.ajax({url:uucss_global.ajax_url,method:"POST",data:{action:"frontend_logs",type:t.type,url:t.url,log:t.log,nonce:window.uucss_global.nonce},success:function(t){}})},s(document).ready(function(){function e(){var t=s("#blocklist-add"),e=t.val().trim();""===e||0<=window.blocklist.findIndex(function(t){return t===e})||(blocklist.push(e),t.val(""),i())}function n(){var t=s("#safelist-type"),e=s("#safelist-add"),n={type:t.val(),rule:e.val().trim()};!n.rule||0<=window.safelist.findIndex(function(t){return t.rule===n.rule&&t.type===n.type})||(safelist.push(n),e.val(""),t.val("greedy"),o())}function i(){s(".blocklist-list ul").empty(),window.blocklist.forEach(function(t){t=s('<li><span data-rule="'+t+'" title="remove rule" class="dashicons dashicons-remove dashicons-no-alt"></span> <span class="blocklist-list-value"> '+t+"</span></li>");t.find(".dashicons-remove").click(function(){var e=s(this).data("rule");window.blocklist=window.blocklist.filter(function(t){return!(t===e)}),i()}),s(".blocklist-list ul").append(t)}),s("#uucss_blocklist").val(JSON.stringify(window.blocklist))}function o(){s(".safelist-list ul").empty(),window.safelist.forEach(function(t){t=s('<li><span data-rule="'+t.rule+'" data-type="'+t.type+'" title="remove rule" class="dashicons dashicons-remove dashicons-no-alt"></span> <span class="safelist-list-type"> '+t.type+"</span> <span>"+t.rule+"</span></li>");t.find(".dashicons-remove").click(function(){var e=s(this).data();window.safelist=window.safelist.filter(function(t){return!(t.rule===e.rule&&t.type===e.type)}),o()}),s(".safelist-list ul").append(t)}),s("#uucss_safelist").val(JSON.stringify(window.safelist))}var a;window.location.href.includes("#configure_autoptimize_css")&&s(document).ready(function(){s(window).scrollTop(s("#autoptimize_css").position().top-50)}),window.safelist=JSON.parse(s("#uucss_safelist").val()||"[]"),window.blocklist=JSON.parse(s("#uucss_blocklist").val()||"[]"),o(),i(),s("#uucss-options .safelist-add button, #uucss-wrapper .safelist-add button").on("click",function(t){t.preventDefault(),n()}),s("#uucss-options .safelist-add #safelist-add, #uucss-wrapper .safelist-add button").on("keydown",function(t){t.key&&"Enter"===t.key&&(t.preventDefault(),n())}),s("#uucss-options .blocklist-add button, #uucss-wrapper .blocklist-add button").on("click",function(t){t.preventDefault(),e()}),s("#uucss-options .blocklist-add #blocklist-add, #uucss-wrapper .blocklist-add button").on("keydown",function(t){t.key&&"Enter"===t.key&&(t.preventDefault(),e())}),s(".notice-action-rapidload-db-update .notice-main-action a.button").click(function(t){var e=s(this);function i(){var t=s(".notice-action-rapidload-db-update .notice-icon-content");t.find("h2").text("RapidLoad - Data update failed !"),t.find("p").text("Database update failed"),s(".notice-action-rapidload-db-update").css("border-left-color","#dc3232"),e.text("Failed : Contact Support"),e.attr("href","https://rapidload.zendesk.com/hc/en-us/requests/new"),e.attr("target","_blank")}"Contact Support"!==e.text()&&(t.preventDefault(),e.text("Updating..."),e.removeAttr("href"),s.ajax({url:uucss_global.ajax_url,method:"POST",data:{action:"rapidload_db_update",nonce:window.uucss_global.nonce},success:function(t){t.success?window.location.reload():i()},error:function(t,e,n){i()}}))}),s(".rapidload-clear-all").click(function(t){t.preventDefault();var t=s(this).find("a").attr("href"),t=new URLSearchParams(t.split("?")[1]),n={};t.forEach((t,e)=>{n[e]=t}),wp.ajax.post("rapidload_purge_all",n).done(function(t){window.location.reload()})}),window.uucss&&""===uucss.api_key_verified||((a=s(".license-info")).length&&a.addClass("loading"),wp.ajax?.post("uucss_license",{nonce:window.uucss_global.nonce}).then(function(t){a.length&&(s(".license-info ul").show(),s("#license-name").text(t.name),s("#license-email").text(t.email),s("#license-next_billing").text(new Date(1e3*t.next_billing).toLocaleDateString()),s("#license-plan").text(t.plan),s("#license-domain").text(t.siteUrl),a.removeClass("loading")),Math.floor((new Date(1e3*t.next_billing)-new Date)/1e3)/86400<0&&(t=s("#wpbody-content .wrap")).length&&t.prepend(`<div class="uucss-notice-action notice notice-action notice-action-on-board notice-info">
                                  <div class="notice-action-inner">
                                    <div class="notice-icon">
                                        <div class="logo-wrapper">
                                            <img src="http://dev.rapidload.local/wp-content/plugins/autoptimize-unusedcss/assets/images/logo-icon.svg" width="40" alt="RapidLoad logo">
                                        </div>
                                    </div>
                                    <div class="notice-icon-content">
                                       <h2 class="uucss-notice-title">You are missing out RapidLoad benefits</h2>
                                        <p>RapidLoad is not working on your site anymore, which means you will have larger CSS files, overall a larger page size and lower page-speed scores. </p>
                                    </div>
                                        <div class="notice-main-action">
                                        <p>
                                            <a target="_blank" class="button button-primary" href="https://app.rapidload.io/auth/sign-in/?goto=https://app.rapidload.io/subscription">Activate</a>
                                        </p>
                                    </div>
                                </div>
                            </div>`)}).fail(function(t){a.length&&(s(".license-info ul").hide(),s(".license-info #license-message").show().html("Sorry, we couldn't collect license information of yours."),a.removeClass("loading"))}),tippy(".uucss-support a",{allowHTML:!0,arrow:!1,appendTo:"parent",animation:"shift-toward",placement:"top-end",content:function(){var t=document.getElementById("uucss-support-tooltip");return t.style.display="inline-block",t}}))})}(jQuery);