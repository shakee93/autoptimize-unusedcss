import{c as R,t as M,j as e,u as E,s as f,a as F,o as $,b as I}from"./index.js";import{r as l}from"./core-vendor.js";import{u as P}from"./index3.js";import"./vendor.js";import"./animations.js";const n=R("MousePointerClick",[["path",{d:"m9 9 5 12 1.774-5.226L21 14 9 9z",key:"1qd44z"}],["path",{d:"m16.071 16.071 4.243 4.243",key:"wfhsjb"}],["path",{d:"m7.188 2.239.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656-2.12 2.122",key:"1bk8fz"}]]),D=({audit:o})=>{const{dispatch:t,openAudits:a,activeTab:c}=E();return l.useEffect(()=>{a.includes(o.id)||t(f("openAudits",[...a,o.id])),(o.type==="opportunity"?"opportunities":o.type)!==c&&t(f("activeTab",o.type==="opportunity"?"opportunities":o.type))},[]),e.jsxs(e.Fragment,{children:[e.jsx(n,{onClick:()=>{},className:"mb-2"}),"Click the ",e.jsx("span",{className:"text-purple-750",children:'"Show Actions"'})," button to view detailed information on each performance audit and dive deeper."]})},L=o=>{var r,i;let t=o.id;const a=!!((i=(r=o.files)==null?void 0:r.headings)!=null&&i.find(p=>p.valueType==="controls"));let c=o.settings.filter(p=>{var g,h;return!((h=(g=o.files)==null?void 0:g.grouped_items)!=null&&h.map(u=>M(o,u.type)).includes(p.category))});return[{selector:`[data-tour="audit-${t}"]`,content:{header:"Explore Individual Audits",body:e.jsx(D,{audit:o})},position:"left",resizeObservables:[`[data-tour="audit-${t}"]`,`[data-tour="audit-${t}-group-0"]`,`[data-tour="audit-${t}"] .audit-content`]},...o.files.items.length>0?[{selector:`[data-tour="${t}-group-0"]`,content:{header:"Streamlined Audit Insights",body:e.jsx(e.Fragment,{children:"Within every audit, discover thoughtfully arranged details and actions. Clarity, made simple."})},position:"left",resizeObservables:[`[data-tour="${t}-group-0"]`]}]:[],...o.settings.length>0&&c.length===0?[{selector:`[data-tour="${t}-group-0-settings"]`,content:{header:"Tailored Recommendations",body:e.jsx(e.Fragment,{children:"Discover our suggestions for features. Toggle them on or off to fit your preferences seamlessly."})},position:"top"}]:[],{selector:`[data-tour="${t}-group-0-table"]`,content:{header:"Organizing Your Assets",body:e.jsx(e.Fragment,{children:"Explore the table to find resources and their associated actions. Properly organized to help improve your page performance."})},position:"top"},...a?[{selector:`[data-tour="${t}-file-action-0"]`,content:{header:"Adjusting File Actions",body:e.jsxs(e.Fragment,{children:[e.jsx(n,{className:"mb-2"}),"Click on the actions dropdown to change how each file behave. Adjust as needed to fine-tune your page's performance."]})},position:"top",resizeObservables:["[data-radix-popper-content-wrapper]",`[data-tour="${t}-file-action-0"]`],highlightedSelectors:["[data-radix-popper-content-wrapper]",`[data-tour="${t}-file-action-0"]`]}]:[]]},Y=[{selector:'[data-tour="switch-report-strategy"]',content:{header:"Select Mobile or Desktop",body:"Pick a device to analyze and optimize the page."}},{selector:'[data-tour="current-url"]',content:{header:"Current URL",body:e.jsxs(e.Fragment,{children:[" ",e.jsx(n,{className:"mb-2"})," This is the URL currently selected to configure, optimize, and analyze your site's performance."]})}},{selector:'[data-tour="analyze"]',content:{header:"Refresh Speed Again",body:e.jsxs(e.Fragment,{children:[" ",e.jsx(n,{className:"mb-2"})," Click to re-analyze the page speed using Google PageSpeed Insights."]})}},{selector:'[data-tour="test-mode"]',content:{header:"Test-Mode",body:e.jsxs(e.Fragment,{children:[" ",e.jsx(n,{className:"mb-2"})," Enable this to keep RapidLoad changes from going live."]})}},{selector:'[data-tour="preview-button"]',content:{header:"Preview",body:e.jsxs(e.Fragment,{children:[" ",e.jsx(n,{className:"mb-2"})," Click to see how the page looks after applying RapidLoad optimization before going live."]})}},{selector:'[data-tour="speed-settings"]',content:{header:"Speed Settings",body:e.jsxs(e.Fragment,{children:[" ",e.jsx(n,{className:"mb-2"})," Configure the RapidLoad plugin with one-click gears."]})}},{selector:'[data-tour="settings-gear"]',content:{header:"Performance gears",body:e.jsxs(e.Fragment,{children:[" ",e.jsx(n,{className:"mb-2"})," Select your Performance Mode: Starter, Accelerate, TurboMax, or Customize, to fine-tune your site's speed."]})},position:"right"},{selector:'[data-tour="customize-settings"]',content:{header:"Customize Settings",body:e.jsxs(e.Fragment,{children:[" ",e.jsx(n,{className:"mb-2"})," Tailor your site's performance settings to your specific requirements."]})},position:"right"},{selector:'[data-tour="speed-insights"]',content:{header:"Your Speed Insights",body:"See your overall website's speed rating, along with a breakdown of key metrics and performance scores."},position:"right"},{selector:'[data-tour="expand-metrics"]',content:{header:"Metrics",body:e.jsxs(e.Fragment,{children:[" ",e.jsx(n,{className:"mb-2"}),"Click on ”Expand Metrics” to identify individual metrics to uncover insights and get recommendations for enhancement."]})},position:"right"},{selector:'[data-tour="audit-groups"]',content:{header:"Dive into Audit Groups",body:e.jsxs("div",{className:"flex flex-col gap-2 ",children:[e.jsx(n,{}),e.jsx("div",{className:"text-md border-b pb-4",children:"Click on each audit group to explore detailed insights and actions."}),e.jsx("div",{className:"text-sm text-brand-600",children:e.jsxs("ul",{className:"dark:text-brand-200 text-brand-800 flex flex-col gap-2 [&>*]:flex [&>*]:flex-col [&>*]:gap-1",children:[e.jsxs("li",{children:[e.jsx("span",{className:"font-bold ",children:"Opportunities"})," Recommendations from Google to enhance your page's speed and efficiency."]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-bold d",children:"Diagnostics"})," In-depth feedback about your site's performance and potential issues."]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-bold ",children:"Passed Audits"})," Areas where your website meets or exceeds performance standards."]})]})})]})},position:"left"}],q=[{selector:'[data-tour="save-changes"]',content:{header:"Saving Your Optimizations",body:e.jsxs(e.Fragment,{children:[e.jsx(n,{className:"mb-2"}),"After making changes, remember to save. Tap the ",e.jsx("span",{className:"text-purple-750",children:'"Save Changes"'})," button to ensure all your tweaks are updated."]})},position:(o,t)=>{var r;let a=document.getElementById("rapidload-optimizer-shadow-dom"),c=(r=a==null?void 0:a.shadowRoot)==null?void 0:r.querySelector('[data-tour="save-changes"]');if(c){let i=c.getBoundingClientRect();return[Number(i.x+i.width)-o.width,i.y-o.height-25]}return"top"},padding:{popover:[100,25]}}],Q=({mode:o})=>{const{data:t,loading:a}=F($),{setIsOpen:c,isOpen:r,setSteps:i,currentStep:p,setCurrentStep:g}=P(),{activeTab:h,isTourOpen:u,activeMetric:O,dispatch:b}=E(),{activeReport:y,mobile:B,desktop:G}=F(s=>s.app);l.useEffect(()=>{var j,v,S,w,k,z,A,C;let s=t==null?void 0:t.grouped.opportunities.find(m=>m.settings.length>0&&m.files.items.length>0);s||(s=t==null?void 0:t.grouped.diagnostics.find(m=>m.settings.length>0&&m.files.items.length>0)),!s&&((v=(j=t==null?void 0:t.grouped)==null?void 0:j.opportunities)!=null&&v.length)&&((w=(S=t==null?void 0:t.grouped)==null?void 0:S.opportunities)==null?void 0:w.length)>0&&(s=t==null?void 0:t.grouped.opportunities[0]),!s&&((z=(k=t==null?void 0:t.grouped)==null?void 0:k.diagnostics)!=null&&z.length)&&((C=(A=t==null?void 0:t.grouped)==null?void 0:A.diagnostics)==null?void 0:C.length)>0&&(s=t==null?void 0:t.grouped.diagnostics[0]),i&&i(m=>{let N=document.getElementById("rapidload-optimizer-shadow-dom");return[...Y,...s?L(s):[],...o==="normal"?q:[]].map(d=>{var T;return N&&(d.shadowSelector=typeof d.selector=="string"?d.selector:d.shadowSelector,d.selector=(T=N.shadowRoot)==null?void 0:T.querySelector(d.shadowSelector)),d})})},[y,p]),l.useEffect(()=>{r||g(0)},[y]),l.useEffect(()=>{O&&b(f("activeMetric",null))},[p]),l.useEffect(()=>{},[r]);const x=()=>{const s=document.getElementById("rapidload-page-optimizer-content");r&&s?s.style.overflowY="hidden":s&&(s.style.overflowY="auto")};return l.useEffect(()=>{u!==r&&(x(),c(u))},[u]),l.useEffect(()=>{u!==r&&(x(),b(I("isTourOpen",r)))},[r]),e.jsx(e.Fragment,{})};export{Q as default};
