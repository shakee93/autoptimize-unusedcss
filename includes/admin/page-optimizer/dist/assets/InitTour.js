import{c as T,t as $,j as e,u as N,s as O,a as F,o as D,b as I,d as M}from"./index.js";import{r as a}from"./core-vendor.js";import{u as R}from"./index3.js";import"./vendor.js";const l=T("MousePointerClick",[["path",{d:"m9 9 5 12 1.774-5.226L21 14 9 9z",key:"1qd44z"}],["path",{d:"m16.071 16.071 4.243 4.243",key:"wfhsjb"}],["path",{d:"m7.188 2.239.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656-2.12 2.122",key:"1bk8fz"}]]),P=({audit:t})=>{const{dispatch:o,openAudits:d}=N();return a.useEffect(()=>{d.includes(t.id)||o(O("openAudits",[...d,t.id]))},[]),e.jsxs(e.Fragment,{children:[e.jsx(l,{className:"mb-2"}),"Click the ",e.jsx("span",{className:"text-purple-750",children:'"Show Actions"'})," button to view detailed information on each performance audit and dive deeper."]})},Y=t=>{var p,u;let o=t.id;const d=!!((u=(p=t.files)==null?void 0:p.headings)!=null&&u.find(m=>m.valueType==="controls"));let n=t.settings.filter(m=>{var g,r;return!((r=(g=t.files)==null?void 0:g.grouped_items)!=null&&r.map(h=>$(t,h.type)).includes(m.category))});return[{selector:`[data-tour="audit-${o}"]`,content:{header:"Explore Individual Audits",body:e.jsx(P,{audit:t})},position:"left",resizeObservables:[`[data-tour="audit-${o}"]`,`[data-tour="audit-${o}-group-0"]`,`[data-tour="audit-${o}"] .audit-content`]},...t.settings.length>0&&n.length>0?[{selector:`[data-tour="${o}-recommended-settings"]`,content:{header:"Tailored Recommendations",body:e.jsx(e.Fragment,{children:"Discover our suggestions for features. Toggle them on or off to fit your preferences seamlessly."})},position:"top"}]:[],...t.files.items.length>0?[{selector:`[data-tour="${o}-group-0"]`,content:{header:"Streamlined Audit Insights",body:e.jsx(e.Fragment,{children:"Within every audit, discover thoughtfully arranged details and actions. Clarity, made simple."})},position:"left",resizeObservables:[`[data-tour="${o}-group-0"]`]}]:[],...t.settings.length>0&&n.length===0?[{selector:`[data-tour="${o}-group-0-settings"]`,content:{header:"Tailored Recommendations",body:e.jsx(e.Fragment,{children:"Discover our suggestions for features. Toggle them on or off to fit your preferences seamlessly."})},position:"top"}]:[],{selector:`[data-tour="${o}-group-0-table"]`,content:{header:"Organizing Your Assets",body:e.jsx(e.Fragment,{children:"Explore the table to find resources and their associated actions. Properly organized to help improve your page performance."})},position:"top"},...d?[{selector:`[data-tour="${o}-file-action-0"]`,content:{header:"Adjusting File Actions",body:e.jsxs(e.Fragment,{children:[e.jsx(l,{className:"mb-2"}),"Click on the actions dropdown to change how each file behave. Adjust as needed to fine-tune your page's performance."]})},position:"top",resizeObservables:["[data-radix-popper-content-wrapper]",`[data-tour="${o}-file-action-0"]`],highlightedSelectors:["[data-radix-popper-content-wrapper]",`[data-tour="${o}-file-action-0"]`]}]:[]]},G=[{selector:'[data-tour="switch-report-strategy"]',content:{header:"Select Mobile or Desktop",body:"Pick a device to analyze and optimize the page."}},{selector:'[data-tour="analyze"]',content:{header:"Refresh Speed Again",body:e.jsxs(e.Fragment,{children:[" ",e.jsx(l,{className:"mb-2"})," Click to re-analyze the page speed using Google PageSpeed Insights."]})}},{selector:'[data-tour="speed-insights"]',content:{header:"Your Speed Insights",body:"See your overall website's speed rating, along with a breakdown of key metrics and performance scores."},position:"right"},{selector:'[data-tour="metrics"]',content:{header:"Dive Deeper into Metrics",body:e.jsxs(e.Fragment,{children:[" ",e.jsx(l,{className:"mb-2"}),"Click on individual metrics to uncover insights and get recommendations for enhancement."]})},position:"right"},{selector:'[data-tour="audits"]',content:{header:"Performance Audits & Actions",body:e.jsx(e.Fragment,{children:"Discover the top audits needing attention and follow our recommended actions to enhance your page's performance."})},position:"left"},{selector:'[data-tour="audit-groups"]',content:{header:"Dive into Audit Groups",body:e.jsxs("div",{className:"flex flex-col gap-2 ",children:[e.jsx(l,{}),e.jsx("div",{className:"text-md border-b pb-4",children:"Click on each audit group to explore detailed insights and actions."}),e.jsx("div",{className:"text-sm text-brand-600",children:e.jsxs("ul",{className:"dark:text-brand-200 text-brand-800 flex flex-col gap-2 [&>*]:flex [&>*]:flex-col [&>*]:gap-1",children:[e.jsxs("li",{children:[e.jsx("span",{className:"font-bold ",children:"Opportunities"})," Recommendations from Google to enhance your page's speed and efficiency."]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-bold d",children:"Diagnostics"})," In-depth feedback about your site's performance and potential issues."]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-bold ",children:"Passed Audits"})," Areas where your website meets or exceeds performance standards."]})]})})]})},position:"left"}],q=[{selector:'[data-tour="save-changes"]',content:{header:"Saving Your Optimizations",body:e.jsxs(e.Fragment,{children:[e.jsx(l,{className:"mb-2"}),"After making changes, remember to save. Tap the ",e.jsx("span",{className:"text-purple-750",children:'"Save Changes"'})," button to ensure all your tweaks are updated."]})},position:"bottom",padding:{popover:[100,25]}}],X=()=>{const{data:t,loading:o}=F(D),{setIsOpen:d,isOpen:n,setSteps:p,currentStep:u,setCurrentStep:m}=R(),{activeTab:g,isTourOpen:r,activeMetric:h,dispatch:f}=N(),{activeReport:x,mobile:B,desktop:L}=F(s=>s.app),{setShowOptimizer:W,options:_,version:H,mode:E}=I();return a.useEffect(()=>{var b,y,j,v,S,w,A,k;let s=t==null?void 0:t.grouped.opportunities.find(c=>c.settings.length>0&&c.files.items.length>0);s||(s=t==null?void 0:t.grouped.diagnostics.find(c=>c.settings.length>0&&c.files.items.length>0)),!s&&((y=(b=t==null?void 0:t.grouped)==null?void 0:b.opportunities)!=null&&y.length)&&((v=(j=t==null?void 0:t.grouped)==null?void 0:j.opportunities)==null?void 0:v.length)>0&&(s=t==null?void 0:t.grouped.opportunities[0]),!s&&((w=(S=t==null?void 0:t.grouped)==null?void 0:S.diagnostics)!=null&&w.length)&&((k=(A=t==null?void 0:t.grouped)==null?void 0:A.diagnostics)==null?void 0:k.length)>0&&(s=t==null?void 0:t.grouped.diagnostics[0]),p&&p(c=>{let z=document.getElementById("rapidload-optimizer-shadow-dom");return[...G,...s?Y(s):[],...E==="normal"?q:[]].map(i=>{var C;return z&&(i.shadowSelector=typeof i.selector=="string"?i.selector:i.shadowSelector,i.selector=(C=z.shadowRoot)==null?void 0:C.querySelector(i.shadowSelector)),i})})},[x,u]),a.useEffect(()=>{n||m(0)},[g,x]),a.useEffect(()=>{h&&f(O("activeMetric",null))},[u]),a.useEffect(()=>{const s=document.getElementById("rapidload-page-optimizer-content");n&&s?s.style.overflowY="hidden":s&&(s.style.overflowY="auto")},[n]),a.useEffect(()=>{r!==n&&d(r)},[r]),a.useEffect(()=>{r!==n&&f(M("isTourOpen",n))},[n]),e.jsx(e.Fragment,{})};export{X as default};
