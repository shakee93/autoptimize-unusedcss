import{c as $,t as D,j as e,u as F,a as y,o as N,s as b}from"./index.js";import{r as c}from"./core-vendor.js";import{u as I}from"./index3.js";import"./vendor.js";const l=$("MousePointerClick",[["path",{d:"m9 9 5 12 1.774-5.226L21 14 9 9z",key:"1qd44z"}],["path",{d:"m16.071 16.071 4.243 4.243",key:"wfhsjb"}],["path",{d:"m7.188 2.239.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656-2.12 2.122",key:"1bk8fz"}]]),O=({audit:t})=>{const{dispatch:s,openAudits:r}=F(),{activeReport:n}=y(N);return c.useEffect(()=>{const i=r.includes(t.id);s(b("activeTab",t.type==="opportunity"?"opportunities":t.type)),i||setTimeout(()=>{s(b("openAudits",[...r,t.id]))},0)},[n,r]),e.jsxs(e.Fragment,{children:[e.jsx(l,{className:"mb-2"}),"Click the ",e.jsx("span",{className:"text-purple-750",children:'"Show Actions"'})," button to view detailed information on each performance audit and dive deeper."]})},M=t=>{var i,p;let s=t.id;const r=!!((p=(i=t.files)==null?void 0:i.headings)!=null&&p.find(u=>u.valueType==="controls"));let n=t.settings.filter(u=>{var m,g;return!((g=(m=t.files)==null?void 0:m.grouped_items)!=null&&g.map(f=>D(t,f.type)).includes(u.category))});return[{selector:`[data-tour="audit-${s}"]`,content:{header:"Explore Individual Audits",body:e.jsx(O,{audit:t})},position:"left",resizeObservables:[`[data-tour="audit-${s}"]`,`[data-tour="audit-${s}-group-0"]`,`[data-tour="audit-${s}"] .audit-content`]},...t.settings.length>0&&n.length>0?[{selector:`[data-tour="${s}-recommended-settings"]`,content:{header:"Tailored Recommendations",body:e.jsx(e.Fragment,{children:"Discover our suggestions for features. Toggle them on or off to fit your preferences seamlessly."})},position:"top"}]:[],...t.files.items.length>0?[{selector:`[data-tour="${s}-group-0"]`,content:{header:"Streamlined Audit Insights",body:e.jsx(e.Fragment,{children:"Within every audit, discover thoughtfully arranged details and actions. Clarity, made simple."})},position:"left",resizeObservables:[`[data-tour="${s}-group-0"]`]}]:[],...t.settings.length>0&&n.length===0?[{selector:`[data-tour="${s}-group-0-settings"]`,content:{header:"Tailored Recommendations",body:e.jsx(e.Fragment,{children:"Discover our suggestions for features. Toggle them on or off to fit your preferences seamlessly."})},position:"top"}]:[],{selector:`[data-tour="${s}-group-0-table"]`,content:{header:"Organizing Your Assets",body:e.jsx(e.Fragment,{children:"Explore the table to find resources and their associated actions. Properly organized to help improve your page performance."})},position:"top"},...r?[{selector:`[data-tour="${s}-file-action-0"]`,content:{header:"Adjusting File Actions",body:e.jsxs(e.Fragment,{children:[e.jsx(l,{className:"mb-2"}),"Click on the actions dropdown to change how each file behave. Adjust as needed to fine-tune your page's performance."]})},position:"top",resizeObservables:["[data-radix-popper-content-wrapper]",`[data-tour="${s}-file-action-0"]`],highlightedSelectors:["[data-radix-popper-content-wrapper]",`[data-tour="${s}-file-action-0"]`]}]:[]]},R=[{selector:'[data-tour="switch-report-strategy"]',content:{header:"Select Mobile or Desktop",body:"Pick a device to analyze and optimize the page."}},{selector:'[data-tour="analyze"]',content:{header:"Refresh Speed Again",body:e.jsxs(e.Fragment,{children:[" ",e.jsx(l,{className:"mb-2"})," Click to re-analyze the page speed using Google PageSpeed Insights."]})}},{selector:'[data-tour="speed-insights"]',content:{header:"Your Speed Insights",body:"See your overall website's speed rating, along with a breakdown of key metrics and performance scores."},position:"right"},{selector:'[data-tour="metrics"]',content:{header:"Dive Deeper into Metrics",body:e.jsxs(e.Fragment,{children:[" ",e.jsx(l,{className:"mb-2"}),"Click on individual metrics to uncover insights and get recommendations for enhancement."]})},position:"right"},{selector:'[data-tour="audits"]',content:{header:"Performance Audits & Actions",body:e.jsx(e.Fragment,{children:"Discover the top audits needing attention and follow our recommended actions to enhance your page's performance."})},position:"left"},{selector:'[data-tour="audit-groups"]',content:{header:"Dive into Audit Groups",body:e.jsxs("div",{className:"flex flex-col gap-2 ",children:[e.jsx(l,{}),e.jsx("div",{className:"text-md border-b pb-4",children:"Click on each audit group to explore detailed insights and actions."}),e.jsx("div",{className:"text-sm text-brand-600",children:e.jsxs("ul",{className:"dark:text-brand-200 text-brand-800 flex flex-col gap-2 [&>*]:flex [&>*]:flex-col [&>*]:gap-1",children:[e.jsxs("li",{children:[e.jsx("span",{className:"font-bold ",children:"Opportunities"})," Recommendations from Google to enhance your page's speed and efficiency."]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-bold d",children:"Diagnostics"})," In-depth feedback about your site's performance and potential issues."]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-bold ",children:"Passed Audits"})," Areas where your website meets or exceeds performance standards."]})]})})]})},position:"left"}],L=[{selector:'[data-tour="save-changes"]',content:{header:"Saving Your Optimizations",body:e.jsxs(e.Fragment,{children:[e.jsx(l,{className:"mb-2"}),"After making changes, remember to save. Tap the ",e.jsx("span",{className:"text-purple-750",children:'"Save Changes"'})," button to ensure all your tweaks are updated."]})},position:"bottom",padding:{popover:[100,25]}}],H=()=>{const{data:t,loading:s}=y(N),{setIsOpen:r,isOpen:n,setSteps:i,currentStep:p,setCurrentStep:u}=I(),{mode:m,activeTab:g,activeMetric:f,dispatch:T}=F(),{activeReport:v,mobile:P,desktop:Y}=y(o=>o.app);return c.useEffect(()=>{var h,x,j,w,S,k,A,z;let o=t==null?void 0:t.grouped.opportunities.find(d=>d.settings.length>0&&d.files.items.length>0);o||(o=t==null?void 0:t.grouped.diagnostics.find(d=>d.settings.length>0&&d.files.items.length>0)),!o&&((x=(h=t==null?void 0:t.grouped)==null?void 0:h.opportunities)!=null&&x.length)&&((w=(j=t==null?void 0:t.grouped)==null?void 0:j.opportunities)==null?void 0:w.length)>0&&(o=t==null?void 0:t.grouped.opportunities[0]),!o&&((k=(S=t==null?void 0:t.grouped)==null?void 0:S.diagnostics)!=null&&k.length)&&((z=(A=t==null?void 0:t.grouped)==null?void 0:A.diagnostics)==null?void 0:z.length)>0&&(o=t==null?void 0:t.grouped.diagnostics[0]),i&&i(d=>{let E=document.getElementById("rapidload-optimizer-shadow-dom");return[...R,...o?M(o):[],...m==="normal"?L:[]].map(a=>{var C;return E&&(a.shadowSelector=typeof a.selector=="string"?a.selector:a.shadowSelector,a.selector=(C=E.shadowRoot)==null?void 0:C.querySelector(a.shadowSelector)),a})})},[v,p]),c.useEffect(()=>{n||u(0)},[g,v]),c.useEffect(()=>{f&&T(b("activeMetric",null))},[p]),c.useEffect(()=>{const o=document.getElementById("rapidload-page-optimizer-content");n&&o?o.style.overflowY="hidden":o&&(o.style.overflowY="auto")},[n]),c.useEffect(()=>{const o=x=>{r(!0)};window.addEventListener("rapidLoad:open-titan-tour",o);const h=new CustomEvent("rapidLoad:titan-tour-mounted");return window.dispatchEvent(h),()=>{window.removeEventListener("rapidLoad:open-titan-tour",o)}},[]),e.jsx(e.Fragment,{})};export{H as default};
